<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Widget</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        .chat-icon {
            position: fixed;
            bottom: 20px;
            right: 20px;
            /*background: #007bff;*/
            /*border-radius: 50%;*/
            padding: 10px;
            cursor: pointer;
            /*box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);*/
        }

        .chat-icon .icon {
            width: 24px;
            height: 24px;
            fill: white;
        }

        .chat-widget {
            display: none;
            position: fixed;
            bottom: 120px;
            right: 20px;
            width: 300px;
            border: 1px solid #007bff;
            border-radius: 5px;
            background: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .chat-header {
            background: #007bff;
            color: white;
            padding: 10px;
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
        }

        .chat-body {
            padding: 10px;
            height: 200px;
            overflow-y: auto;
        }

        .chat-footer {
            display: flex;
            padding: 10px;
        }

        .chat-footer input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .chat-footer button {
            padding: 10px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>

<script type="text/javascript" src="https://static.nid.naver.com/js/naverLogin_implicit-1.0.3.js" charset="utf-8"></script>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
<script>

function sendmsg() {


 	msg = $("#msg").val();//id 값으로 input 접근
	//alert(msg);
	$.ajax({ //ajax를 사용
		type : "POST", //포스트방식으로
		url :  "/gpt/response", //해당 주소로 데이터 전송
		data : {
			msg : msg 
		},
		success : function(result) {//성공시
			document.getElementById('result').innerHTML = 
				result + "......(줄임)";
		},
		error : function(request, status, error) {//실패시
			//alert(request.status + " " + request.responseText);
			refresh();

		}
	});
	
}
</script>
  
  
  
  
                <div class="d-flex align-items-center flex-1 gap-3 border border-translucent rounded-pill px-4">
                <!-- <input class="form-control outline-none border-0 flex-1 fs-9 px-0" name="msg" id="msg" type="text" placeholder="질문을 여기에 입력하세요" />
 -->              </div>
              
              <button onclick="sendmsg()">버튼</button>
              
            </div>


    <div class="chat-icon" id="chatIcon">
        <!-- <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon">
            <path d="M12 2C6.48 2 2 6.48 2 12c0 5.52 4.48 10 10 10 1.94 0 3.73-.55 5.26-1.49L22 22l-2.51-5.26C21.45 14.73 22 13.42 22 12c0-5.52-4.48-10-10-10zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/>
        </svg> -->
        <img src="/img/chaticon.png">
    </div>
    
    <div class="chat-widget" id="chatWidget">
        <div class="chat-header">인공지능 챗봇</div>
        <div class="chat-body" id="chatBody">
            <div id = "result"> </div><p>Ask us anything – we’ll get back to you here or by email within 24 hours.</p>
        </div>
        
        
        <div class="chat-footer">
            <input type="text" name="msg" id="msg" placeholder="Type your message...">
            <button onclick="sendmsg()">버튼</button>
        </div>
    </div>

    <script>
        document.getElementById('chatIcon').addEventListener('click', function() {
            const chatWidget = document.getElementById('chatWidget');
            chatWidget.style.display = chatWidget.style.display === 'none' || chatWidget.style.display === '' ? 'block' : 'none';
        });

        document.getElementById('sendButton').addEventListener('click', function() {
            const chatInput = document.getElementById('chatInput');
            const chatBody = document.getElementById('chatBody');

            if (chatInput.value.trim() !== '') {
                const message = document.createElement('p');
                message.textContent = chatInput.value;
                chatBody.appendChild(message);
                chatInput.value = ''; // Clear input field
            }
        });
    </script>
</body>
</html>
