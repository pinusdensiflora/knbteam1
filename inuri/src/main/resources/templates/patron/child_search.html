<!-- 
생성자 : 김근환 
생성일 : 9.19
연락처 : ghwan07@gmail.com
-->
<html layout:decorate="~{layout}">
<div layout:fragment="content">

<div class="container-fluid page-header py-5" style="padding-bottom: 30px;">
        <!-- 상단 헤더 -->
        <h1 class="text-center text-white display-6">후원받은 아동들</h1>

        <ol class="breadcrumb justify-content-center mb-0">
            <li class="breadcrumb-item"><a href="/news">공지사항</a></li>
            <li class="breadcrumb-item"><a href="/news/info">소식</a></li>
            <li class="breadcrumb-item"><a href="/news/assist">고객지원</a></li>
            <li class="breadcrumb-item"><a href="/news/address">찾아오시는 길</a></li>
        </ol>
    </div>
    
<div class="container">
        <!-- 검색창 시작 -->
    <div style="display: flex; justify-content: flex-end; margin: 30px;">
        <div style="width: 35%;">
            <form action="/child_search" method="get">
    <div class="input-group w-100">
        <!-- 검색 기준 선택 -->
        <select name="searchType" class="form-select p-3" aria-label="검색 기준">
            <option value="name">이름</option>
            <option value="location">국가</option>
            <option value="age">나이</option>
        </select>

        <!-- 검색어 입력 -->
        <input type="text" name="keyword" class="form-control p-3" placeholder="검색어를 입력하세요" aria-describedby="search-icon">

        <!-- 검색 버튼 -->
        <button type="submit" class="input-group-text p-3" id="search-icon">
            <i class="fa fa-search"></i>
        </button>
    </div>
</form>


        </div>
    </div>
    <!-- 검색창 끝 -->

    <!-- 검색 결과 리스트 -->
    <div class="row">
        <div th:if="${searchResults.isEmpty()}" class="alert alert-warning">
            검색 결과가 없습니다.
        </div>
        
        <div th:each="child : ${searchResults.content}" class="col-md-4 col-lg-4 col-sm-6">
            <div class="rounded position-relative child-item">
                <!-- 아동 이미지 -->
                <div class="child-img">
                    <img th:src="${child.chimg != null} ? @{${child.chimg}} : @{/img/default-child.jpg}" 
                         class="img-fluid w-100 rounded-top" alt="아동 이미지">
                </div>
                <!-- 아동 정보 -->
                <div class="p-4 border border-secondary border-top-0 rounded-bottom">
                    <a th:href="@{/child_detail/{chid}(chid=${child.chid})}">
                        <h4 th:text="${child.chname}"></h4>
                    </a>
                    <p>성별: <span th:text="${child.chgender}"></span></p>
                    <p>거주지: <span th:text="${child.chlocation}"></span></p>
                </div>
            </div>
        </div>
    </div>

    <!-- 페이징 처리 -->
    <div th:if="${searchResults.totalPages > 1}" class="pagination">
        <ul>
            <li th:each="page : ${#numbers.sequence(1, searchResults.totalPages)}"
                th:class="${page == searchResults.number + 1} ? 'active'">
                <a th:href="@{/child_search(keyword=${keyword}, searchType=${searchType}, page=${page - 1})}"
                   th:text="${page}"></a>
            </li>
        </ul>
    </div>
</div>
<div style="margin-bottom: 100px;"></div>

    <!-- Back to Top -->
    <a href="#" class="btn btn-primary border-3 border-primary rounded-circle back-to-top"><i class="fa fa-arrow-up"></i></a>

</div>
</html>
